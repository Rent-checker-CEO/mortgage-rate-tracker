<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UK Mortgage Rate Tracker – Spot Drops & Save</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1 { text-align: center; color: #333; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background: #f4f4f4; font-weight: bold; }
    .alert-form { background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 30px 0; }
    input, select, button { padding: 10px; margin: 8px 0; font-size: 16px; }
    button { background: #007bff; color: white; border: none; cursor: pointer; border-radius: 4px; }
    button:hover { background: #0056b3; }
    footer { margin-top: 50px; text-align: center; color: #666; font-size: 14px; }
  </style>
</head>
<body>
  <h1>UK Mortgage Rate Tracker</h1>
  <p style="text-align: center;">Track the best UK fixed-rate mortgage deals daily. Last updated: <span id="updated">Loading...</span><br>
  Data from trusted sources like HomeOwners Alliance, Uswitch, L&C. <a href="https://github.com/Rent-checker-CEO/mortgage-rate-tracker">Source on GitHub</a></p>
  
  <h2>Top Fixed-Rate Deals (60% LTV focus)</h2>
  <table id="deals-table">
    <thead>
      <tr>
        <th>Term</th>
        <th>Lender</th>
        <th>Rate (%)</th>
        <th>LTV (%)</th>
        <th>Fee (£)</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="alert-form">
    <h3>Get Free Email Alerts When Rates Drop</h3>
    <p>We'll notify you (coming soon) if rates fall below your threshold.</p>
    <form id="alertForm">
      <input type="email" id="email" placeholder="your@email.com" required>
      <input type="number" id="threshold" step="0.01" min="0" placeholder="e.g. 4.0" required>
      <select id="term">
        <option value="2 Year Fixed">2 Year Fixed</option>
        <option value="5 Year Fixed">5 Year Fixed</option>
      </select>
      <button type="submit">Sign Up for Alerts</button>
    </form>
    <p id="formMessage" style="color: green;"></p>
  </div>

  <script>
    fetch('deals.json')
      .then(res => {
        if (!res.ok) throw new Error('Failed to load deals.json');
        return res.json();
      })
      .then(data => {
        document.getElementById('updated').textContent = data.updated;
        const tbody = document.querySelector('#deals-table tbody');
        data.deals.forEach(deal => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${deal.term}</td>
            <td>${deal.lender}</td>
            <td>${deal.rate}</td>
            <td>${deal.ltv}</td>
            <td>${deal.fee}</td>
            <td>${deal.notes}</td>
          `;
          tbody.appendChild(row);
        });
      })
      .catch(err => {
        console.error('Error:', err);
        document.getElementById('updated').textContent = 'Error loading data – check deals.json';
      });

    document.getElementById('alertForm').addEventListener('submit', e => {
      e.preventDefault();
      document.getElementById('formMessage').textContent = 'Thanks! Alert setup in progress – check back soon.';
    });
  </script>

  <footer>
    <p>Premium upgrades coming soon via Gumroad: £1.99 for premium alerts + template | £9.99 remortgage checklist PDF</p>
  </footer>
</body>
</html>
